<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Tattersalls</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="libs/bootstrap-2.3.2/css/united.min.css" rel="stylesheet" />
<link href="libs/bootstrap-2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
<script src="libs/bootstrap-2.3.2/js/bootstrap.min.js"></script>

<style type="text/css">

/* padding for bootstrap navbar */
body {
  padding-top: 50px;
  padding-bottom: 40px;
}
@media (max-width: 979px) {
  body {
    padding-top: 0;
  }
}

/* offset scroll position for anchor links (for fixed navbar)  */
@media (min-width: 980px) {
  .section h2 {
    padding-top: 52px;
    margin-top: -52px;
  }
  .section h3 {
    padding-top: 52px;
    margin-top: -52px;
  }
}

p{
  font-size: 13px;
}
/* don't use link color in navbar */
.dropdown-menu>li>a {
  color: black;
}

/* some padding for disqus */
#disqus_thread {
  margin-top: 45px;
}

</style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #303030; color: #cccccc; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #cccccc; background-color: #303030; }
code > span.kw { color: #f0dfaf; }
code > span.dt { color: #dfdfbf; }
code > span.dv { color: #dcdccc; }
code > span.bn { color: #dca3a3; }
code > span.fl { color: #c0bed1; }
code > span.ch { color: #dca3a3; }
code > span.st { color: #cc9393; }
code > span.co { color: #7f9f7f; }
code > span.ot { color: #efef8f; }
code > span.al { color: #ffcfaf; }
code > span.fu { color: #efef8f; }
code > span.er { color: #c3bf9f; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
</style>
<div class="container-fluid main-container">

<div class="navbar navbar-inverse navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container">
			<button class="btn btn-navbar" type="button" data-toggle="collapse" data-target=".nav-collapse">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a href="http://durtal.github.io" class="brand">return to RcappeR</a>
			<div class="nav-collapse collapse">
				<ul class="nav">
					<li>
						<a href="index.html">rBloodstock Home</a>
					</li>
					<li class="dropdown">
						<a href="Datasets" class="dropdown-toggle" data-toggle="dropdown">
							Datasets <b class="caret"></b>
						</a>
						<ul class="dropdown-menu">
							<li>
								<a href="tattersalls.html">Tattersalls</a>
							</li>
						</ul>
					</li>
					<li class="dropdown">
						<a href="functions" class="dropdown-toggle" data-toggle="dropdown">
							Functions <b class="caret"></b>
						</a>
						<ul class="dropdown-menu">
							<li>
								<a href="collect_tatts_sales.html">collect_tatts_sales</a>
							</li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</div>
</div>

<div id="header">
<h1 class="title">Tattersalls</h1>
</div>


<p>There are currently (as of 2014-11-24) 5 datasets with Tattersalls sales data, these are:</p>
<table>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Sales included</th>
<th align="left">Dim</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">tatts_2010</td>
<td align="left"><sub>feb, craven, guineas, july, oct_bk1, oct_bk2, oct_bk3, autumn_hit, breeders_flat, dec_yearlings, dec_foals, dec_mares</sub></td>
<td align="left">7796 rows, 12 cols</td>
</tr>
<tr class="even">
<td align="left">tatts_2011</td>
<td align="left"><sub>feb, craven, breeze_up, july, oct_bk1, oct_bk2, oct_bk3, autumn_hit, breeders_flat, dec_yearlings, dec_foals, dec_mares</sub></td>
<td align="left">6946 rows, 12 cols</td>
</tr>
<tr class="odd">
<td align="left">tatts_2012</td>
<td align="left"><sub>dec_mares, dec_foals, dec_yearlings, autumn_hit, oct_bk3, oct_bk2, oct_bk1, july, guineas_hit, guineas, craven, feb</sub></td>
<td align="left">7101 rows, 12 cols</td>
</tr>
<tr class="even">
<td align="left">tatts_2013</td>
<td align="left"><sub>feb, craven, guineas, guineas_hit, july, oct_bk1, oct_bk2, oct_bk3, oct_bk4, autumn_hit, dec_yearlings, dec_foals, dec_mares</sub></td>
<td align="left">7192 rows, 12 cols</td>
</tr>
<tr class="odd">
<td align="left">tatts_2014</td>
<td align="left"><sub>july, guineas, guineas_hit, craven, feb, oct_bk1, oct_bk2, oct_bk3</sub></td>
<td align="left">3359 rows, 12 cols</td>
</tr>
</tbody>
</table>
<p>There is a function to collect data from sales not included in the package, see <a href="collect_tatts_sales.html">here</a>.</p>
<p>To load a dataset:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(tatts_2010)</code></pre>
<p>Each of the 5 datasets have the same 12 variables, <code>year, sale, sale_name, lot_no, horse, sex, color, sire, dam, seller, buyer, price</code>, as can be seen in the table above, the same sales take place each year.</p>
<div id="some-analysis" class="section level3">
<h3>Some Analysis</h3>
<p>It is easy to combine the 5 datasets, such as:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(tatts_2010, tatts_2011, tatts_2012, tatts_2013, tatts_2014)

<span class="co"># combine all 5 datasets into one large dataset</span>
tattersalls &lt;-<span class="st"> </span><span class="kw">rbind</span>(tatts_2010, tatts_2011, tatts_2012, tatts_2013, tatts_2014)
<span class="co"># clean workspace</span>
<span class="kw">rm</span>(tatts_2010, tatts_2011, tatts_2012, tatts_2013, tatts_2014)</code></pre>
<p>The new <code>tattersalls</code> dataset has 32394 rows and 12 columns, the <code>sale_name</code> variable can serve as an individual sale (so it includes the year of the sale, eg. <strong>feb_2010</strong>), while the <code>sale</code> variable will match across multiple years.</p>
<p>Loading other libraries <code>dplyr</code> and <code>ggplot2</code> we can quickly analyse data:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)</code></pre>
<p>The average price of lots in each sale across multiple years:</p>
<pre class="sourceCode r"><code class="sourceCode r">sale_summaries &lt;-<span class="st"> </span>tattersalls %&gt;%
<span class="st">    </span><span class="kw">group_by</span>(sale, year) %&gt;%
<span class="st">    </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(),
              <span class="dt">mean =</span> <span class="kw">mean</span>(price, <span class="dt">na.rm=</span>T))

<span class="kw">ggplot</span>(sale_summaries, <span class="kw">aes</span>(<span class="dt">x=</span>year, <span class="dt">y=</span>mean)) +
<span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;#D9220F&quot;</span>) +
<span class="st">    </span><span class="kw">theme_bw</span>() +
<span class="st">    </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>)) +
<span class="st">    </span><span class="kw">facet_wrap</span>(~sale)</code></pre>
<p><img src="tattersalls_files/figure-html/unnamed-chunk-5-1.png" title="" alt="" width="864" style="display: block; margin: auto;" /></p>
<p>One thing stands out immediately from the plots above, don’t go to October Book 1 unless you have deep pockets, the average price paid has more than doubled from 96,001 Guineas in 2010 to 212,637 Guineas in 2014. October Book 2 has also (unsurprisingly) seen a small increase in average price paid over the same period. The Craven sale has also seen a small increase over recent years, but prices are in other sales appear to be quite consistent.</p>
<p>We can also find the 20 sires with the highest average price over the 5 years:</p>
<pre class="sourceCode r"><code class="sourceCode r">tattersalls %&gt;%
<span class="st">    </span><span class="kw">group_by</span>(sire) %&gt;%
<span class="st">    </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(),
              <span class="dt">mean =</span> <span class="kw">mean</span>(price, <span class="dt">na.rm=</span>T),
              <span class="dt">sd =</span> <span class="kw">sd</span>(price, <span class="dt">na.rm=</span>T),
              <span class="dt">min =</span> <span class="kw">min</span>(price, <span class="dt">na.rm=</span>T),
              <span class="dt">max =</span> <span class="kw">max</span>(price, <span class="dt">na.rm=</span>T)) %&gt;%
<span class="st">    </span><span class="kw">filter</span>(n &gt;=<span class="st"> </span><span class="dv">50</span>) %&gt;%
<span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(mean)) %&gt;%
<span class="st">    </span><span class="kw">head</span>(<span class="dv">20</span>)</code></pre>
<pre><code>## Source: local data frame [20 x 6]
## 
##                       sire   n      mean        sd   min     max
## 1            galileo (ire) 468 232839.89 437553.44   800 5000000
## 2      sea the stars (ire) 135 228273.58 153669.31 16000  650000
## 3       new approach (ire) 198 118050.60 113471.13  2500  600000
## 4            montjeu (ire) 257 116878.68 165270.79   800  850000
## 5     sadler&#39;s wells (usa) 128 110720.59 222354.19  1000 1700000
## 6             dubawi (ire) 319 104496.25 177682.27   800 1600000
## 7         oasis dream (gb) 449 104113.61 154020.86   800 1100000
## 8       fastnet rock (aus) 124  94277.23  87510.47  4000  540000
## 9             monsun (ger)  63  89016.00  94988.28  2000  400000
## 10      raven&#39;s pass (usa) 116  84393.20 106863.52  3000  800000
## 11 invincible spirit (ire) 519  81189.90  94453.87   800  680000
## 12   danehill dancer (ire) 413  81165.06 238670.67   800 4000000
## 13            dansili (gb) 321  80624.90 124738.21   800 1200000
## 14        street cry (ire)  89  75665.08 142388.11  1000 1000000
## 15      lope de vega (ire)  66  75203.39 104064.43  1000  650000
## 16         shamardal (usa) 398  75127.16 125686.99   800 1700000
## 17       dream ahead (usa)  56  74530.61  77694.68  3000  400000
## 18       poet&#39;s voice (gb)  76  73397.06  90785.48  3500  525000
## 19              arch (usa)  69  71660.00  85244.99  2000  300000
## 20    rip van winkle (ire) 107  70181.32  64477.58  4000  400000</code></pre>
<p><strong>Sea The Stars</strong> is top of the list, his progeny costing a cool 224,100 Guineas on average, Galileo is a very close second, with a large drop down, of almost 100,000 Guineas, to Danehill. Perhaps more interesting than Sea The Stars topping Galileo is the <em>standard deviation</em> of their prices, Sea The Stars with a much smaller <strong>sd</strong> perhaps suggests buyers believe his progeny will prove to be successful (see Taghrooda), but are still showing some restraint and aren’t quite willing to part with the big sums seen with Galileo, whose most expensive sale fetched 9 times the most expensive Sea The Stars sale.</p>
<p>It’s also possible to look at the buyers or agents with the highest average price paid over the 5years.</p>
<pre class="sourceCode r"><code class="sourceCode r">tattersalls %&gt;%
<span class="st">    </span><span class="kw">group_by</span>(buyer) %&gt;%
<span class="st">    </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(),
              <span class="dt">mean =</span> <span class="kw">mean</span>(price, <span class="dt">na.rm=</span>T),
              <span class="dt">sd =</span> <span class="kw">sd</span>(price, <span class="dt">na.rm=</span>T),
              <span class="dt">min =</span> <span class="kw">min</span>(price, <span class="dt">na.rm=</span>T),
              <span class="dt">max =</span> <span class="kw">max</span>(price, <span class="dt">na.rm=</span>T)) %&gt;%
<span class="st">    </span><span class="kw">filter</span>(n &gt;=<span class="st"> </span><span class="dv">50</span>) %&gt;%
<span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(mean)) %&gt;%
<span class="st">    </span><span class="kw">head</span>(<span class="dv">20</span>)</code></pre>
<pre><code>## Source: local data frame [20 x 6]
## 
##                            buyer   n      mean        sd   min     max
## 1                   demi o&#39;byrne  50 344060.00 267094.37  6000 1300000
## 2       john ferguson bloodstock 289 217788.93 306356.89 25000 4000000
## 3            j warren bloodstock  83 175728.92 147062.25 16500  680000
## 4        shadwell estate company 223 171502.24 135652.44 35000 1100000
## 5     c gordon-watson bloodstock 255 152979.61 194525.69   800 1700000
## 6       david redvers bloodstock 187 124661.50 231037.29  5000 2500000
## 7         john warren bloodstock  93 118645.16  95735.10 11000  600000
## 8                   dwayne woods  59  95652.54  79130.74  3000  450000
## 9           blandford bloodstock 415  81112.29 105464.53   800  925000
## 10             mrs a skiffington  54  80138.89  79756.61  3000  400000
## 11     richard frisby bloodstock  83  75716.87  86007.98  2000  370000
## 12     anthony stroud bloodstock 200  71845.00  69454.76   800  380000
## 13 peter &amp; ross doyle bloodstock 340  71655.00  80123.82   800  800000
## 14               jeremy brummitt  54  69175.93  85540.96  6500  475000
## 15     stephen hillen bloodstock 160  66943.75 172907.06  3000 2100000
## 16         hugo merry bloodstock 138  65771.01  89668.89  1700  675000
## 17               sackvilledonald 180  65169.44  59202.64  2500  460000
## 18  kern/lillingston association 125  56936.00  70994.03  3800  460000
## 19                   bba ireland 539  55816.14 212148.72   800 4700000
## 20             rabbah bloodstock 392  47691.33  42346.02  5000  500000</code></pre>
<p>Demi O’Byrne (an agent associated with Coolmore) isn’t as active as others in the top 5, with just 50 purchases, but the average price he pays is almost double that of John Ferguson (links with Godolphin).</p>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
